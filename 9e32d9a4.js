import{i as g,s as m,x as a,R as y}from"./d29d05c2.js";import{_ as r,g as f,t as b,c as D,u as G,a as P,d as $,s as M,b as N,e as q}from"./0291be5f.js";var x=Object.freeze,H=Object.defineProperty,K=(s,e)=>x(H(s,"raw",{value:x(e||s.slice())})),L;class l{}l.cssBase=g(L||(L=K(["\n        :host{\n            display: block;\n            margin: 0px;\n            padding: 0px;\n        }\n\n       \n\n    "]))),l.LoginPageTheme=[l.cssBase];/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const J=(s,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(i){i.createProperty(e.key,s)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(i){i.createProperty(e.key,s)}},Q=(s,e,i)=>{e.constructor.createProperty(i,s)};function t(s){return(e,i)=>i!==void 0?Q(s,e,i):J(s,e)}class X extends m{constructor(){super(...arguments),this.showLoginForm=!0,this.toggleForm=()=>{this.showLoginForm=!this.showLoginForm,this.requestUpdate()}}}const c={userAdmin:"Admin",userGeneric:"User",coleccionUsuarios:"usuarios",puntosSuspensivos:"...................................................................................................................................................................................................................................................................................................................................................................................................................................................................."};class n extends m{constructor(){super(...arguments),this.email="",this.username="",this.password="",this.repeatPassword="",this.error=""}async handleRegister(){if(this.password!==this.repeatPassword){this.error="Las contrase\xF1as no coinciden";return}const e=f(b);try{const i=(await D(e,this.email,this.password)).user;await G(i,{displayName:this.username});const o=P(),h=$(o,c.coleccionUsuarios,i.uid);await M(h,{email:this.email,username:this.username,userType:c.userGeneric,uid:i.uid})}catch(i){const o=i.message;this.error=o}}}r([t({type:String})],n.prototype,"email",void 0),r([t({type:String})],n.prototype,"username",void 0),r([t({type:String})],n.prototype,"password",void 0),r([t({type:String})],n.prototype,"repeatPassword",void 0),r([t({type:String})],n.prototype,"error",void 0);var S=Object.freeze,Y=Object.defineProperty,Z=(s,e)=>S(Y(s,"raw",{value:S(e||s.slice())})),F;class d{}d.cssBase=g(F||(F=Z(["\n        :host{\n            display: block;\n        }\n\n        \n\n    "]))),d.WcRegisterTheme=[d.cssBase];var z=Object.freeze,ee=Object.defineProperty,R=(s,e)=>z(ee(s,"raw",{value:z(e||s.slice())})),k,O;class se extends n{static finalizeStyles(e){return[...super.finalizeStyles(e),...d.WcRegisterTheme]}render(){return a(O||(O=R(["\n            <div>\n                <h2>Registro</h2>\n                ",'\n                <div>\n                    <div>\n                        <label for="email">Correo electr\xF3nico:</label>\n                        <input type="email" id="email" .value="','" @input="','">\n                    </div>\n                    <div>\n                        <label for="username">Nombre de usuario:</label>\n                        <input type="text" id="username" .value="','" @input="','">\n                    </div>\n                    <div>\n                        <label for="password">Contrase\xF1a:</label>\n                        <input type="password" id="password" .value="','" @input="','">\n                    </div>\n                    <div>\n                        <label for="repeatPassword">Repetir contrase\xF1a:</label>\n                        <input type="password" id="repeatPassword" .value="','" @input="','">\n                    </div>\n                    <button @click=',">Registrarse</button>\n                </div>\n            </div>\n        "])),this.error?a(k||(k=R(["<p>","</p>"])),this.error):"",this.email,e=>this.email=e.target.value,this.username,e=>this.username=e.target.value,this.password,e=>this.password=e.target.value,this.repeatPassword,e=>this.repeatPassword=e.target.value,this.handleRegister)}}window.customElements.define("wc-register",se);class p extends m{constructor(){super(...arguments),this.email="",this.password="",this.error=null}async handleLogin(){const e=f(b);try{const i=(await N(e,this.email,this.password)).user,o=P(),h=$(o,c.coleccionUsuarios,i.uid),w=await q(h);w.exists()&&(w.data().userType===c.userAdmin?y.go("/panel"):y.go("/home"))}catch(i){this.error=i.message}}}r([t({type:String})],p.prototype,"email",void 0),r([t({type:String})],p.prototype,"password",void 0),r([t({type:String})],p.prototype,"error",void 0);var j=Object.freeze,ie=Object.defineProperty,re=(s,e)=>j(ie(s,"raw",{value:j(e||s.slice())})),W;class u{}u.cssBase=g(W||(W=re(["\n        :host{\n            display: block;\n        }\n\n        \n\n    "]))),u.WcLoginTheme=[u.cssBase];var T=Object.freeze,te=Object.defineProperty,A=(s,e)=>T(te(s,"raw",{value:T(e||s.slice())})),B,E;class ae extends p{static finalizeStyles(e){return[...super.finalizeStyles(e),...u.WcLoginTheme]}render(){return a(E||(E=A(["\n            <div>\n                <h2>Iniciar Sesi\xF3n</h2>\n                ",'\n                <div>\n                    <div>\n                        <label for="email">Correo electr\xF3nico:</label>\n                        <input type="email" id="email" .value="','" @input="','">\n                    </div>\n                    <div>\n                        <label for="password">Contrase\xF1a:</label>\n                        <input type="password" id="password" .value="','" @input="','">\n                    </div>\n                    <button @click=',">Iniciar Sesi\xF3n</button>\n                </div>\n            </div>\n        "])),this.error?a(B||(B=A(["<p>","</p>"])),this.error):"",this.email,e=>this.email=e.target.value,this.password,e=>this.password=e.target.value,this.handleLogin)}}window.customElements.define("wc-login",ae);var U=Object.freeze,ne=Object.defineProperty,v=(s,e)=>U(ne(s,"raw",{value:U(e||s.slice())})),V,C,I;class _ extends X{static finalizeStyles(e){return[...super.finalizeStyles(e),...l.LoginPageTheme]}render(){return a(I||(I=v(['\n            <!--<button @click="','">\n                ',"\n            </button>-->\n            ","\n        "])),this.toggleForm,this.showLoginForm?"Registrarse":"Iniciar Sesi\xF3n",this.showLoginForm?a(V||(V=v(["<wc-login></wc-login>"]))):a(C||(C=v(["<wc-register></wc-register>"]))))}}window.customElements.define("login-page",_);export{_ as LoginPageView};
